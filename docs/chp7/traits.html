<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interface-relevant Traits - High Assurance Rust: Developing Secure and Robust Software</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../landing.html">High Assurance Rust</a></li><li class="chapter-item expanded affix "><a href="../faq.html">Frequently Asked Questions (FAQ)</a></li><li class="chapter-item expanded affix "><a href="../engage.html">Engage with this Book!</a></li><li class="chapter-item expanded affix "><a href="../cfp.html">Sponsor Call for Proposals (CFP)</a></li><li class="chapter-item expanded affix "><a href="../download.html">Download</a></li><li class="chapter-item expanded affix "><a href="../changelog.html">Changelog</a></li><li class="chapter-item expanded affix "><a href="../license.html">License</a></li><li class="chapter-item expanded affix "><li class="part-title">Novice: Systems Security</li><li class="spacer"></li><li class="chapter-item expanded "><a href="../chp1/_index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chp1/why_this_book.html"><strong aria-hidden="true">1.1.</strong> Why this book?</a></li><li class="chapter-item expanded "><a href="../chp1/how_is_this_book_structured.html"><strong aria-hidden="true">1.2.</strong> How is this book structured?</a></li><li class="chapter-item expanded "><a href="../chp1/challenges.html"><strong aria-hidden="true">1.3.</strong> Hands-on Learning</a></li><li class="chapter-item expanded "><a href="../chp1/about_the_team.html"><strong aria-hidden="true">1.4.</strong> About the Team</a></li><li class="chapter-item expanded "><a href="../chp1/_hands_on.html"><strong aria-hidden="true">1.5.</strong> Warmup: Environment Setup</a></li></ol></li><li class="chapter-item expanded "><a href="../chp2/_index.html"><strong aria-hidden="true">2.</strong> Software Assurance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chp2/static_vs_dynamic.html"><strong aria-hidden="true">2.1.</strong> Static vs. Dynamic Tools</a></li><li class="chapter-item expanded "><a href="../chp2/static_assurance_1.html"><strong aria-hidden="true">2.2.</strong> Static Assurance (1/2)</a></li><li class="chapter-item expanded "><a href="../chp2/static_assurance_2.html"><strong aria-hidden="true">2.3.</strong> Static Assurance (2/2)</a></li><li class="chapter-item expanded "><a href="../chp2/dynamic_assurance_1.html"><strong aria-hidden="true">2.4.</strong> Dynamic Assurance (1/3)</a></li><li class="chapter-item expanded "><a href="../chp2/dynamic_assurance_2.html"><strong aria-hidden="true">2.5.</strong> Dynamic Assurance (2/3)</a></li><li class="chapter-item expanded "><a href="../chp2/dynamic_assurance_3.html"><strong aria-hidden="true">2.6.</strong> Dynamic Assurance (3/3)</a></li><li class="chapter-item expanded "><a href="../chp2/limits.html"><strong aria-hidden="true">2.7.</strong> Limitations and Threat Modeling</a></li><li class="chapter-item expanded "><a href="../chp2/cli.html"><strong aria-hidden="true">2.8.</strong> DIY CLI Encryption Tool</a></li><li class="chapter-item expanded "><a href="../chp2/operational_assurance_1.html"><strong aria-hidden="true">2.9.</strong> Operational Assurance (1/2)</a></li><li class="chapter-item expanded "><a href="../chp2/operational_assurance_2.html"><strong aria-hidden="true">2.10.</strong> Operational Assurance (2/2)</a></li><li class="chapter-item expanded "><a href="../chp2/_hands_on.html"><strong aria-hidden="true">2.11.</strong> Challenge: Extend the CLI Tool</a></li></ol></li><li class="chapter-item expanded "><a href="../chp3/_index.html"><strong aria-hidden="true">3.</strong> Rust Zero-Crash Course</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chp3/undef.html"><strong aria-hidden="true">3.1.</strong> On Undefined Behavior</a></li><li class="chapter-item expanded "><a href="../chp3/rust_1_low_data_rep.html"><strong aria-hidden="true">3.2.</strong> Rust: Low-Level Data (1/6)</a></li><li class="chapter-item expanded "><a href="../chp3/rust_2_high_data_rep.html"><strong aria-hidden="true">3.3.</strong> Rust: High-Level Data (2/6)</a></li><li class="chapter-item expanded "><a href="../chp3/rust_3_ctrl_flow.html"><strong aria-hidden="true">3.4.</strong> Rust: Control Flow (3/6)</a></li><li class="chapter-item expanded "><a href="../chp3/rust_4_own_1.html"><strong aria-hidden="true">3.5.</strong> Rust: Ownership Principles (4/6)</a></li><li class="chapter-item expanded "><a href="../chp3/rust_5_own_2.html"><strong aria-hidden="true">3.6.</strong> Rust: Ownership in Practice (5/6)</a></li><li class="chapter-item expanded "><a href="../chp3/rust_6_error.html"><strong aria-hidden="true">3.7.</strong> Rust: Error Handling (6/6)</a></li><li class="chapter-item expanded "><a href="../chp3/modules.html"><strong aria-hidden="true">3.8.</strong> The Module System</a></li><li class="chapter-item expanded "><a href="../chp3/tooling.html"><strong aria-hidden="true">3.9.</strong> Recommended Tooling</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.10.</strong> Rust's Release Cycle</div></li><li class="chapter-item expanded "><a href="../chp3/_hands_on.html"><strong aria-hidden="true">3.11.</strong> Challenge: Port a Program</a></li></ol></li><li class="chapter-item expanded "><a href="../chp4/_index.html"><strong aria-hidden="true">4.</strong> Understanding Memory Safety and Exploitation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chp4/sw_stack_1.html"><strong aria-hidden="true">4.1.</strong> Software Perspective: CPU to Process</a></li><li class="chapter-item expanded "><a href="../chp4/assure_stack_1.html"><strong aria-hidden="true">4.2.</strong> Assurance Perspective: Stack Safety</a></li><li class="chapter-item expanded "><a href="../chp4/attack_1.html"><strong aria-hidden="true">4.3.</strong> Attacker's Perspective: Breaking Safety (1/2)</a></li><li class="chapter-item expanded "><a href="../chp4/attack_2.html"><strong aria-hidden="true">4.4.</strong> Attacker's Perspective: Unifying Theory (2/2)</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.5.</strong> Debugging DIY Secret Obfuscation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.6.</strong> Stack Exploitation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.7.</strong> Software Perspective: Heap (1/2)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.8.</strong> Software Perspective: Heap (2/2)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.9.</strong> Heap Exploitation</div></li><li class="chapter-item expanded "><a href="../chp4/safe_rust_PLACEHOLDER.html"><strong aria-hidden="true">4.10.</strong> Rust's Memory Safety Guarantees (1/2)</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.11.</strong> Rust's Memory Safety Guarantees (2/2)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.12.</strong> Language-agnostic Mitigations</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.13.</strong> Case Study: Real-world Rust CVEs</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.14.</strong> Challenge: Vulnerability Research</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Advanced Beginner: Core Project</li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Binary Search Tree (BST) Basics</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Core BST Operations in Python</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Problems Translating to Rust</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> The Importance of Balance</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Building an Arena Allocator</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Let's Talk Allocators</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> A Stack-Only Arena</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Index-based Data Structures</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> A Self-balancing BST</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chp7/traits.html" class="active"><strong aria-hidden="true">7.1.</strong> Interface-relevant Traits</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Scapegoat Trees</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Insert</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.4.</strong> Remove</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.5.</strong> Find</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.6.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Digital Twin Testing</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Basic QEMU Internals</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> How Semi-hosting Works</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> CLI REPL Harness</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Limitations</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.5.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.6.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Building Maps and Sets</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Implementing Iterators</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Competent: Validation and Deployment</li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Static Verification</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> An Introduction to 1st Order Logic</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> Proving Absence of Panics</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Deductively Verifying our Arena Allocator</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Model Checking for unsafe Code</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Challenge: Prove a Sorting Algorithm</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> Dynamic Testing</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">12.1.</strong> Introduction to Coverage-Guided Fuzzing</div></li><li class="chapter-item expanded "><a href="../chp12/diff_fuzz_PLACEHOLDER.html"><strong aria-hidden="true">12.2.</strong> Building a Differential Fuzzing Harness</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.3.</strong> Using Miri to Detect Undefined Behavior</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.4.</strong> Benchmarking and Optimization</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.5.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.6.</strong> Challenge: Bug-hunting with Fuzzers</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> Operational Deployment</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">13.1.</strong> Understanding unsafe (1/3)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.2.</strong> Understanding unsafe (2/3)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.3.</strong> Understanding unsafe (3/3)</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.4.</strong> CFFI 101</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.5.</strong> C99 Interoperability</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.6.</strong> Python3 Interoperability</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.7.</strong> Runtime Balance Reconfiguration</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.8.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.9.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.</strong> Maximizing Assurance</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">14.1.</strong> Rust Security Research</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.2.</strong> Rust's Limitations</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.3.</strong> Best Practices Beyond Rust</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.4.</strong> TODO</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.5.</strong> Challenge: TODO</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Conclusion</li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> Review</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">15.1.</strong> Key Concepts</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.2.</strong> Key Blue-Team Skills</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.3.</strong> Key Red-Team Skills</div></li></ol></li><li class="chapter-item expanded "><a href="../chp16_appendix/_index.html"><strong aria-hidden="true">16.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">16.1.</strong> Setup: Using our Docker Container</div></li><li class="chapter-item expanded "><a href="../chp16_appendix/tools.html"><strong aria-hidden="true">16.2.</strong> Inventory: Tools of the Trade</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/books.html"><strong aria-hidden="true">16.3.</strong> Inventory: Recommended Reading</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/resources.html"><strong aria-hidden="true">16.4.</strong> Inventory: Additional Resources</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/crypto.html"><strong aria-hidden="true">16.5.</strong> Fundamentals: Stream Ciphers</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/types.html"><strong aria-hidden="true">16.6.</strong> Fundamentals: Type Systems</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/components.html"><strong aria-hidden="true">16.7.</strong> Fundamentals: Component-Based Design</a></li><li class="chapter-item expanded "><a href="../chp16_appendix/mem_hierarch.html"><strong aria-hidden="true">16.8.</strong> Fundamentals: Memory Hierarchy</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.9.</strong> Fundamentals: Dynamic Linking</div></li><li class="chapter-item expanded "><a href="../chp16_appendix/icfg.html"><strong aria-hidden="true">16.10.</strong> Theory: Inter-procedural CFGs</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.11.</strong> Misc: Size Optimization</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.12.</strong> Misc: The Typestate Pattern</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.13.</strong> Misc: C++ Interoperability</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.14.</strong> Misc: Compile-time Metaprogramming</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">High Assurance Rust: Developing Secure and Robust Software</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/tnballo/high-assurance-rust" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://highassurance.rs/engage.html#submit-feedback-questions-issues-or-prs" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="interface-relevant-traits"><a class="header" href="#interface-relevant-traits">Interface-relevant Traits</a></h1>
<p>The library we're building is an alternative to two collections in Rust's standard library: <code>BTreeSet</code><sup class="footnote-reference"><a href="#BTreeSet">1</a></sup> and <code>BTreeMap</code><sup class="footnote-reference"><a href="#BTreeMap">2</a></sup>.
Our goal is to provide the same well-known, idiomatic APIs but with maximal safety (for any system) and bare metal portability (for firmware and/or tiny microcontrollers).</p>
<p>To get there, we need to understand a bit about the design of the standard library's APIs.
Specifically the <em>traits</em> these APIs bind to their <em>generic</em> arguments.
These design decisions shape an interplay of usability and resource management.</p>
<p>API design is a concern orthogonal to the algorithms of our particular data structure, so let's tackle it first.
To achieve feature-parity with the standard library, we'll deepen our understanding of how Rust works &quot;under-the-hood&quot;.</p>
<blockquote>
<p><strong>What are generics and traits, again?</strong></p>
<p>We introduced the concepts and syntax in chapter 3.
To jog your memory:</p>
<ul>
<li>
<p><strong>Generics</strong> (e.g. <code>T</code> standing in for concrete type <code>u64</code> or <code>u32</code>) eliminate the need for code duplication. A single function's source code can be used, by the compiler, to generate one machine-code equivalent for each concrete type that function is called with (monomorphization).</p>
</li>
<li>
<p><strong>Traits</strong> (e.g <code>T: Ord</code> for a type that can be sorted and compared) define behavior shared among different types. They're similar to interfaces and abstract bases classes of other languages.</p>
</li>
</ul>
<p>We often combine the two by binding traits to generic arguments and/or return values.
This allows us to write a single function that our users can leverage for any [generic] type implementing some behavior (one or more specific traits). Even custom types that haven't been invented yet!</p>
</blockquote>
<h2 id="the-map-get-api"><a class="header" href="#the-map-get-api">The Map <code>get</code> API</a></h2>
<p>A <em>map</em> (aka an <em>associative array</em> or <em>symbol table</em>) is a data structure that stores key-value pairs.
Keys are unique and values can be quickly looked up by key.</p>
<p>Rust's <code>BTreeMap</code><sup class="footnote-reference"><a href="#BTreeMap">2</a></sup> is an <em>ordered map</em>, it supports any key type that has a notion of <em>total order</em><sup class="footnote-reference"><a href="#TotalOrder">3</a></sup>.
Colloquially, that means keys can be compared with logical operators (<code>&gt;</code>, <code>&lt;=</code>, <code>==</code>, etc) and sorted.
Because they implement the <code>Ord</code> trait.
If keys can't be ordered but are hashable, you'd want to use a <code>HashMap</code><sup class="footnote-reference"><a href="#HashMap">4</a></sup> instead.</p>
<p>Say we want to perform to a lookup in an ordered map - to get the value associated with a given key, if any.
A <code>get</code> method should take a reference to a key as input, and return an <code>Option</code> (containing a value reference for the <code>Some</code> case, when the key is found).</p>
<p>That's how the standard library works, here's the official example<sup class="footnote-reference"><a href="#BTreeMapGet1">5</a></sup>:</p>
<pre><code class="language-rust noplaypen">use std::collections::BTreeMap;

let mut map = BTreeMap::new();
map.insert(1, &quot;a&quot;);
assert_eq!(map.get(&amp;1), Some(&amp;&quot;a&quot;));
assert_eq!(map.get(&amp;2), None);</code></pre>
<p>Based on the above, you might expect the <code>get</code> method's signature to look like this for <code>BTreeMap&lt;K, V&gt;</code>:</p>
<pre><code class="language-rust ignore">/// Returns a reference to the value corresponding to the key.
pub fn get(&amp;self, key: &amp;K) -&gt; Option&lt;&amp;V&gt;
where
    K: Ord
{
    // ...function body here...
}</code></pre>
<p>But it doesn't.
The real <code>get</code> method has this signature<sup class="footnote-reference"><a href="#BTreeMapGet2">6</a></sup>:</p>
<pre><code class="language-rust ignore">/// Returns a reference to the value corresponding to the key.
pub fn get&lt;Q&gt;(&amp;self, key: &amp;Q) -&gt; Option&lt;&amp;V&gt;
where
    K: Borrow&lt;Q&gt; + Ord,
    Q: Ord + ?Sized,
{
    // ...function body here...
}</code></pre>
<p>Why are there two different generics types at play?
And what are all those strange looking trait bounds?</p>
<p>Let's build our way up to answering those questions by explaining each trait individually.
If you can understand this API, you're well on your way to understanding idiomatic use of traits in general.</p>
<h3 id="the-ord-trait"><a class="header" href="#the-ord-trait">The <code>Ord</code> Trait</a></h3>
<p><code>Ord</code><sup class="footnote-reference"><a href="#Ord">7</a></sup> is the simplest of the three traits in <code>get</code>'s signature, and one we've already discussed.
When a type implements <code>Ord</code>, it can be ordered<sup class="footnote-reference"><a href="#TotalOrd">8</a></sup>.
We can compare one value of this type to another and determine if the two are equal or if one is greater than the other.
This enables us to sort values.</p>
<p>Back in Chapter 3, we implemented the <code>Ord</code> trait for a structure representing an OS process.
This allowed sorting a list of processes by a specific definition of priority (the process's current state, in our case).</p>
<h3 id="the-sized-trait"><a class="header" href="#the-sized-trait">The <code>Sized</code> Trait</a></h3>
<p><code>Sized</code><sup class="footnote-reference"><a href="#Sized">9</a></sup> is something known as a <em>marker trait</em>.
Unlike <code>Ord</code>, there's no &quot;interface&quot; methods to implement because <code>Sized</code> has no behavior of its own.
Marker traits <em>mark a property</em> instead of <em>specifying behavior</em> (plot twist!).</p>
<p>The trait bounds <code>T: Sized</code> tells the compiler that all values of type <code>T</code> have the same size in memory and that this size is known at compile time<sup class="footnote-reference"><a href="#Sizedness">10</a></sup>.
For example, a <code>u32</code> is always 4 bytes long.</p>
<p>Here's where things get interesting: <code>T: ?Sized</code>, the binding used in the above signature (note the leading <code>?</code>), means values of type <code>T</code> are <em>optionally sized</em> - they <em>may or may not</em> be <code>Sized</code>.
Doesn't that seem weirdly ambiguous?</p>
<p>Turns out the ambiguity buys flexibility without introducing any UB.
The standard library designers wanted to handle both the common case and the exception.
The majority of types in Rust are sized, but a handful aren't.
Examples of unsized types include:</p>
<ul>
<li>
<p><strong>Slices:</strong> An slice, <code>[T]</code>, can contain zero or more contiguous <code>T</code>s - thus different slice values could have different sizes.</p>
<ul>
<li>Note that <code>&amp;[T]</code>, a reference to a slice, is always the size of a <em>fat</em> pointer (regular pointer plus slice length metadata).</li>
</ul>
</li>
<li>
<p><strong>Trait Objects:</strong> Rust has a mechanism for <em>dynamic dispatch</em><sup class="footnote-reference"><a href="#DynDis">11</a></sup>. The <code>dyn</code> keyword indicates a <em>trait object</em>: a value that implements a given trait. That value can be <em>any type</em> and have <em>any size</em>, so long as it implements the trait.</p>
<ul>
<li><code>Box&lt;dyn Error&gt;</code>, for example, is a pointer to an instance of any type implementing <code>Error</code> trait.</li>
</ul>
</li>
</ul>
<p>Now values <em>stored</em> in a collection, like <code>BTreeMap</code> must be <code>Sized</code>.
Otherwise we wouldn't know how to store them in memory.</p>
<p>But because <code>get</code> supports both sized and unsized types as a parameter (<code>Q: ?Sized</code>), <em>searching</em> <code>BTreeMap</code> is flexible.
We can find values associated with <em>sized keys</em> using <em>unsized keys</em> of a corresponding type.
We'll see a concrete example toward the end of this section.</p>
<h3 id="the-borrow-trait"><a class="header" href="#the-borrow-trait">The <code>Borrow</code> Trait</a></h3>
<p>A type that implements <code>Borrow&lt;T&gt;</code><sup class="footnote-reference"><a href="#Borrow">12</a></sup> can <em>borrow</em> a <em>reference</em>, <code>&amp;T</code>.
Unlike the similar trait <code>AsRef</code><sup class="footnote-reference"><a href="#AsRef">13</a></sup>, <code>Borrow</code> requires that the borrowed <code>&amp;T</code> have the same comparison and hash semantics as <code>T</code>.
Sounds relevant to <code>BTreeMap</code> (lookup via a sequence of comparisons) and <code>HashMap</code>s (lookup via a hash), right?</p>
<p>It very much is - the <code>Borrow</code> trait is designed to make collection lookups easier and more efficient.
In fact, the standard library includes a &quot;blanket implementation&quot; (always pre-implemented trait) for all types <code>T</code> to be able to borrow themselves (meaning we get <code>T: Borrow&lt;T&gt;</code> for &quot;free&quot;).</p>
<p>This enables key lookups without having to create a copy of the key in memory.
So no need for additional heap allocations if searching a <code>BTreeMap&lt;String, T&gt;</code> by a key of type <code>&amp;str</code>.</p>
<h2 id="putting-it-all-together"><a class="header" href="#putting-it-all-together">Putting it all together</a></h2>
<p>To really grok how <code>Ord</code>, <code>Sized</code>, and <code>Borrow</code> impact API usage in combination, let's walk through an example.</p>
<p>Say we store 8-byte hexspeak<sup class="footnote-reference"><a href="#Hexspeak">14</a></sup> words, e.g. values of type <code>[u8; 8]</code>, in a set.
We later get a list of user-provided hexspeak words of varying sizes, e.g. values of type <code>Vec&lt;u8&gt;</code>.
Some may be 8 bytes long, others may not.</p>
<p>We want to be able to use the <code>get</code> method to check if any user-provided words are already in our set.
Luckily, <code>get</code> lets us search for <em>slices</em> (unsized <code>[u8]</code>).
We can use the arbitrarily-sized, user-provided words as search keys for our set of fixed-size (8-byte words)!</p>
<pre><code class="language-rust noplaypen">use std::collections::BTreeSet;

// Two hexspeak words
let bad_code: [u8; 8] = [0xB, 0xA, 0xA, 0xD, 0xC, 0x0, 0xD, 0xE];
let bad_food: [u8; 8] = [0xB, 0xA, 0xA, 0xD, 0xF, 0x0, 0x0, 0xD];

// Note we're about to store uniformly sized values in our set
assert_eq!(std::mem::size_of_val(&amp;bad_code), 8);
assert_eq!(std::mem::size_of_val(&amp;bad_food), 8);

// Store the two words in our set
let mut set = BTreeSet::new();
set.insert(bad_code);
set.insert(bad_food);

// Vec&lt;u8&gt; is sized, it's actually a fat pointer to a heap buffer.
// But slices of the vec are unsized! For example:
//     &amp;my_vec[0..5] is the first 5 elements
//     &amp;my_vec[1..] is all but the first element
//     &amp;my_vec[..] is all elements
let bad_food_vec: Vec&lt;u8&gt; = vec![0xB, 0xA, 0xA, 0xD, 0xF, 0x0, 0x0, 0xD];
let bad_dude_vec: Vec&lt;u8&gt; = vec![0xB, 0xA, 0xA, 0xD, 0xD, 0x0, 0x0, 0xD];
let cafe_bad_food_vec: Vec&lt;u8&gt; = vec![
    0xC, 0xA, 0xF, 0xE, 0xB, 0xA, 0xA, 0xD, 0xF, 0x0, 0x0, 0xD
];

// Search for a [u8; 8] present
assert_eq!(
    set.get(&amp;bad_food_vec[..]),         // 0xBAADFOOD
    Some(&amp;[0xB, 0xA, 0xA, 0xD, 0xF, 0x0, 0x0, 0xD])
);

// Search for a [u8; 4] not present
assert_eq!(
    set.get(&amp;bad_food_vec[..4]),        // 0xBAAD
    None
);

// Search for an [u8; 8] not present
assert_eq!(
    set.get(&amp;bad_dude_vec[..]),         // 0xBAADDUDE
    None
);

// Search for a [u8; 8] present
assert_eq!(
    set.get(&amp;cafe_bad_food_vec[4..]),   // 0xBAADF00D
    Some(&amp;[0xB, 0xA, 0xA, 0xD, 0xF, 0x0, 0x0, 0xD]),
);

// Search for a [u8; 12] not present
assert_eq!(
    set.get(&amp;cafe_bad_food_vec[..]),    // 0xCAFEBAADF00D
    None
);</code></pre>
<p>So what happened to enable searching fixed-length set elements (<code>[u8; 8]</code>) using arbitrary length (<code>[u8]</code>) keys?
Consider what the compiler converted our generic <code>get</code> callsites into, through the magic of monomorphization:</p>
<pre><code class="language-rust ignore">pub fn get(&amp;self, key: &amp;[u8]) -&gt; Option&lt;&amp;[u8; 8]&gt;
{
    // ...function body of code in our compiled binary...
}</code></pre>
<ul>
<li>
<p><strong><code>Ord</code> and <code>Sized</code></strong> - The trait bound <code>Q: Ord + ?Sized</code> means we're free to search using an arbitrarily sized slice, so long as the slice's contents can be sorted. <code>[u8]</code> meets that criteria. In the above, we converted user-provided vectors into slices.</p>
</li>
<li>
<p><strong><code>Ord</code> and <code>Borrow</code></strong> - The trait bound <code>K: Borrow&lt;Q&gt; + Ord</code> enables that conversion. We can search using any key that can borrow the aforementioned arbitrarily-sized-and-sortable slice. A <code>Vec</code> can view its elements as a contiguous slice, regardless of how many are stored. Since <code>Vec&lt;T&gt;</code> implements <code>Borrow&lt;[T]&gt;</code>, <code>Vec</code> can also borrow that slice from itself (no data copied!). Thus <code>&amp;my_vec[..]</code> (slicing notation shorthand for <code>my_vec.as_slice()</code>) lets us pass in an <code>&amp;[u8]</code> key to search for.</p>
</li>
</ul>
<p>In conclusion, <code>BTreeMaps</code>'s <code>get</code> combines three traits (<code>Ord</code>, <code>?Sized</code>, and <code>Borrow</code>) to enable flexible, efficient APIs.</p>
<h3 id="taking-it-a-step-further-the-default-trait"><a class="header" href="#taking-it-a-step-further-the-default-trait">Taking It a Step Further: The <code>Default</code> Trait</a></h3>
<p>The library we build will bring a fourth trait into the mix: <code>Default</code><sup class="footnote-reference"><a href="#Default">15</a></sup>.
Like it sounds, this trait is for types that have a default value.
For example:</p>
<ul>
<li>
<p>The default for <code>isize</code> is <code>0</code>.</p>
</li>
<li>
<p>The default for <code>Option</code> is <code>None</code>.</p>
</li>
<li>
<p>The default for any dynamic collection (<code>Vec</code>, <code>BTreeSet</code>, <code>HashMap</code>, etc) is an empty instance of that collection.</p>
</li>
</ul>
<p>Our API will look like this:</p>
<pre><code class="language-rust ignore">/// Returns a reference to the value corresponding to the key.
pub fn get&lt;Q&gt;(&amp;self, key: &amp;Q) -&gt; Option&lt;&amp;V&gt;
where
    K: Borrow&lt;Q&gt; + Ord + Default,
    Q: Ord + Default + ?Sized,
{
    // ...function body here...
}</code></pre>
<p>Don't worry, it's easier to use than to read.
Yet the choice to require <code>Default</code> for keys and values is restrictive, users of our library have to ensure the trait is implemented for any custom type they want to store in one of our collections.</p>
<p>Why enforce that sort of limitation?
<code>Default</code> is like a &quot;no argument constructor&quot;, it <em>ensures</em> that values of a type are <em>always safely initialized</em>.</p>
<p>It's a requirement for elements stored in <code>tinyvec</code><sup class="footnote-reference"><a href="#TinyVec">16</a></sup>, the 3rd party <code>#![forbid(unsafe_code)]</code> library we used for our arena allocator in the previous chapter.
So the <code>Default</code> restriction is inherited from a dependency.</p>
<p>Imposing it is an assurance tradeoff.
We ask a little more of our users in exchange for a 100% safe binary, the guarantee that all our code and all dependencies of our code (e.g. the full library <em>supply chain</em>) maximizes memory safety.</p>
<p>If you are morally opposed to requiring <code>Default</code> and want to remain exactly API-compatible with the standard library, feel free to swap <code>tinyvec</code> for <code>smallvec</code><sup class="footnote-reference"><a href="#SmallVec">17</a></sup> in your allocator now and adjust all non-test code for the remainder of this book.
<code>smallvec</code> is another stack-based <code>Vec</code> alternative.
It's used in Mozilla's Servo browser engine.</p>
<p>Unfortunately, <code>smallvec</code> contains <code>unsafe</code> code.
Security researchers have discovered multiple memory safety vulnerabilities in <code>smallvec</code>, for which CVEs have been assigned (e.g. CVE-2021-25900, CVE-2019-15554, CVE-2018-20991, etc).</p>
<p>While <code>smallvec</code> is popular and well-vetted, we can make no guarantee about the number of <em>undiscovered</em> memory safety vulnerabilities still present.
<code>tinyvec</code>, by contrast, will never fall victim to any memory corruption attacks - it's <code>#![forbid(unsafe_code)]</code>.</p>
<blockquote>
<p><strong>Any other traits should I know about?</strong></p>
<p>There isn't an official list of traits every Rust programmer should know.
But you'll almost certainly run into three traits related to memory allocation and deallocation: <code>Clone</code>, <code>Copy</code>, and <code>Drop</code>.
We've touched on some of these before, but they're worth revisiting.</p>
<ul>
<li>
<p><code>Clone</code><sup class="footnote-reference"><a href="#TraitClone">18</a></sup> defines <em>deep</em> copy logic. <code>Clone</code> types must be <code>Sized</code>. Cloning could be expensive if the original needs to be recursively traversed - we have to allocate a counterpart to everything it owns.</p>
<ul>
<li>
<p>For example, copying <code>Vec&lt;String&gt;</code> means copying each <code>String</code>. <code>String</code> is a <code>Vec&lt;u8&gt;</code> internally, so copying each <code>String</code> means copying each <code>u8</code>. That was only 2 levels of recursion, but <code>Clone</code> could require arbitrarily many.</p>
</li>
<li>
<p>If your code is littered with <code>my_structure.clone()</code> calls, removing them <em>might</em> be a &quot;low-hanging fruit&quot; performance optimization. If you can refactor flows of ownership to process primarily references (e.g. replace <code>String</code> with <code>&amp;str</code>), you <em>might</em> save a precious time and memory. &quot;Might&quot; stems from the fact that performance optimizations need to be data driven, not premature. We'll cover micro-benchmarking in Chapter 12.</p>
</li>
</ul>
</li>
<li>
<p><code>Copy</code><sup class="footnote-reference"><a href="#TraitCopy">19</a></sup> is a marker trait for types that can be fully cloned with only a <em>shallow</em> byte-by-byte copy. That means there's no pointers to follow or external resources to duplicate a handle to.</p>
<ul>
<li>
<p>Consider <code>isize</code>, the platform-specific signed integer type. If we duplicate the small chunk of fixed-sized, consecutive bytes that encodes the integer's value then we get a complete replica of the original.</p>
</li>
<li>
<p><code>Copy</code> should be implemented sparingly. It means the assignment operator, <code>=</code>, will copy bytes (implicit &quot;copy semantics&quot;) instead of just transferring ownership (&quot;move semantics&quot;).</p>
</li>
</ul>
</li>
<li>
<p><code>Drop</code><sup class="footnote-reference"><a href="#TraitDrop">20</a></sup> defines a &quot;destructor&quot;. User-definable deallocation logic, called when a variable of the implementing type goes out of scope. All memory and shared resources must be freed. Types that implement <code>Copy</code> are not allowed to implement <code>Drop</code> (these should be mutually exclusive - bitwise copyable memory can be bitwise erased).</p>
<ul>
<li>Note that if the scope of a variable's binding depends on conditional statements, move semantics will be tracked at runtime. The value can be moved here and there, based on which branch is taken, as the program runs. But in the end Rust will only drop it <em>once</em> - when the last-moved location goes out of scope.</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="takeaway"><a class="header" href="#takeaway">Takeaway</a></h2>
<p>As mere users of the standard library's <code>BTreeSet</code>/<code>BTreeMap</code>, the nuances of <code>Ord</code>, <code>?Sized</code>, and <code>Borrow</code> would likely be lost on us.
We could have long and prosperous careers without ever having to think about why a map <code>get</code> signature looks like it does.</p>
<p>But as designers and implementers of an API-compatible alternative, we want to empower our users with the same flexible abstractions the standard library provides.
That entails understanding these traits and how they interact.</p>
<p>The hexspeak example above wouldn't even have compiled if the standard library used the more intuitive signature we started this section with (<code>pub fn get&lt;K: Ord&gt;(&amp;self, key: &amp;K) -&gt; Option&lt;&amp;V&gt;</code>).
So the complexity we've covered has a major payoff: the same code seamlessly supports a broader range of use cases.</p>
<p>With all that trait binding background behind us, we know how and why specific interfaces are designed a certain way.
Now let's tackle the logic backing them: the core operations of our self-balancing scapegoat tree.</p>
<hr />
<div class="footnote-definition" id="BTreeSet"><sup class="footnote-definition-label">1</sup>
<p><a href="https://doc.rust-lang.org/stable/std/collections/struct.BTreeSet.html"><em>Struct <code>std::collections::BTreeSet</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="BTreeMap"><sup class="footnote-definition-label">2</sup>
<p><a href="https://doc.rust-lang.org/std/collections/struct.BTreeMap.html"><em>Struct <code>std::collections::BTreeMap</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TotalOrder"><sup class="footnote-definition-label">3</sup>
<p><a href="https://en.wikipedia.org/wiki/Total_order">Total order</a> Wikipedia (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="HashMap"><sup class="footnote-definition-label">4</sup>
<p><a href="https://doc.rust-lang.org/std/collections/struct.HashMap.html"><em>Struct <code>std::collections::HashMap</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="BTreeMapGet1"><sup class="footnote-definition-label">5</sup>
<p><a href="https://doc.rust-lang.org/std/collections/struct.BTreeMap.html#examples-3"><em><code>BTreeMap</code> <code>get</code> API example</em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="BTreeMapGet2"><sup class="footnote-definition-label">6</sup>
<p><a href="https://doc.rust-lang.org/std/collections/struct.BTreeMap.html#method.get"><em><code>BTreeMap</code> <code>get</code> API</em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="Ord"><sup class="footnote-definition-label">7</sup>
<p><a href="https://doc.rust-lang.org/std/cmp/trait.Ord.html"><em>Trait <code>std::cmp::Ord</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TotalOrd"><sup class="footnote-definition-label">8</sup>
<p><a href="https://en.wikipedia.org/wiki/Total_order">Total order</a> Wikipedia (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="Sized"><sup class="footnote-definition-label">9</sup>
<p><a href="https://doc.rust-lang.org/std/marker/trait.Sized.html"><em>Trait <code>std::marker::Sized</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="Sizedness"><sup class="footnote-definition-label">10</sup>
<p><a href="https://github.com/pretzelhammer/rust-blog/blob/master/posts/sizedness-in-rust.md"><em>Sizedness in Rust</em></a>.  pretzelhammer (2020).</p>
</div>
<div class="footnote-definition" id="DynDis"><sup class="footnote-definition-label">11</sup>
<p><a href="https://en.wikipedia.org/wiki/Dynamic_dispatch">Dynamic dispatch</a>. Wikipedia (Accessed 2022). One use case for dynamic dispatch is enabling <em>heterogeneous collections</em>. <code>Vec&lt;Box&lt;dyn Error&gt;&gt;</code>, for example, allows us to store a vector of <code>Error</code> objects, potentially of varying types.</p>
</div>
<div class="footnote-definition" id="Borrow"><sup class="footnote-definition-label">12</sup>
<p><a href="https://doc.rust-lang.org/std/borrow/trait.Borrow.html"><em>Trait <code>std::borrow::Borrow</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="AsRef"><sup class="footnote-definition-label">13</sup>
<p><a href="https://doc.rust-lang.org/std/convert/trait.AsRef.html"><em>Trait <code>std::convert::AsRef</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="Hexspeak"><sup class="footnote-definition-label">14</sup>
<p><a href="https://en.wikipedia.org/wiki/Hexspeak">Hexspeak</a>. Wikipedia (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="Default"><sup class="footnote-definition-label">15</sup>
<p><a href="https://doc.rust-lang.org/std/default/trait.Default.html"><em>Trait <code>std::default::Default</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TinyVec"><sup class="footnote-definition-label">16</sup>
<p><a href="https://crates.io/crates/tinyvec"><em><code>tinyvec</code></em></a>. Lokathor (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="SmallVec"><sup class="footnote-definition-label">17</sup>
<p><a href="https://crates.io/crates/smallvec"><em><code>smallvec</code></em></a>. Simon Sapin, Ms2ger, Servo project (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TraitClone"><sup class="footnote-definition-label">18</sup>
<p><a href="https://doc.rust-lang.org/std/clone/trait.Clone.html"><em>Trait <code>std::clone::Clone</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TraitCopy"><sup class="footnote-definition-label">19</sup>
<p><a href="https://doc.rust-lang.org/std/marker/trait.Copy.html"><em>Trait <code>std::marker::Copy</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>
<div class="footnote-definition" id="TraitDrop"><sup class="footnote-definition-label">20</sup>
<p><a href="https://doc.rust-lang.org/std/ops/trait.Drop.html"><em>Trait <code>std::ops::Drop</code></em></a>. The Rust Team (Accessed 2022).</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chp4/safe_rust_PLACEHOLDER.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chp12/diff_fuzz_PLACEHOLDER.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chp4/safe_rust_PLACEHOLDER.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chp12/diff_fuzz_PLACEHOLDER.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
